<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dejar Reseña - Shadow & Stitch</title>
    <link rel="stylesheet" href="../css/styleMain.css">
    <link rel="stylesheet" href="../css/reseñas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header con Menú Hamburguesa -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <h1>SHADOW & STITCH</h1>
            </div>

            <!-- USUARIO -->
            <div class="header-user-info" id="headerUserInfo">
                <i class="fas fa-user-circle"></i>
                <span class="username" id="headerUsername">Usuario</span>
            </div>
            <!-- Menú Hamburguesa -->
            <div class="hamburger-menu">
                <div class="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <!-- Menú Lateral -->
            <div class="mobile-menu">
                <div class="menu-header">
                    <h3>S&S</h3>
                </div>
                <ul class="mobile-nav-links">
                    <li><a href="../index.html"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="../index.html#categorias"><i class="fas fa-th-large"></i> Categorías</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">
                            <i class="fas fa-user"></i> Cuenta
                            <i class="fas fa-chevron-down dropdown-arrow"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="login.html" class="dropdown-link">Iniciar Sesión</a></li>
                            <li><a href="CrearCuenta.html" class="dropdown-link">Crear Cuenta</a></li>
                        </ul>
                    </li>
                    <li><a href="carrito.html"><i class="fas fa-shopping-bag"></i> Carrito</a></li>
                    <li><a href="Listadeseos.html"><i class="fas fa-heart"></i> Lista de Deseos</a></li>
                    <li><a href="seguimiento.html"><i class="fas fa-route"></i> Seguimiento</a></li>
                    <li><a href="orders.html"><i class="fas fa-receipt"></i> Mis Compras</a></li>
                    <li><a href="../index.html#nuevo"><i class="fas fa-star"></i> Nuevo</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">
                            <i class="fas fa-star"></i> Reseñas
                            <i class="fas fa-chevron-down dropdown-arrow"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="misreseñas.html" class="dropdown-link">Mis Reseñas</a></li>
                            <li><a href="reseñaUser.html" class="dropdown-link">Crear Reseña</a></li>
                        </ul>
                    </li>
                </ul>
                
                <div class="menu-footer">
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Contenido Principal -->
    <main class="review-main">
        <div class="review-container">
            <!-- NUEVA SECCIÓN: Información de Sesión Activa -->
            <div class="user-session-info" id="userSessionInfo" style="display: none;">
                <!-- Se llenará dinámicamente con JavaScript -->
            </div>

            <!-- Sección de Selección de Producto -->
            <div class="product-selection-section" id="productSelectionSection">
                <h2><i class="fas fa-shopping-bag"></i> Selecciona un Producto para Reseñar</h2>
                <p>Elige entre los productos que has comprado para dejar tu reseña</p>
                
                <div class="purchased-products-grid" id="purchasedProductsGrid">
                    <!-- Los productos comprados se cargarán aquí dinámicamente -->
                </div>
                
                <div class="no-purchases-message" id="noPurchasesMessage" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart fa-3x"></i>
                        <h3>No tienes productos para reseñar</h3>
                        <p>Parece que aún no has realizado ninguna compra o ya has reseñado todos tus productos.</p>
                        <a href="../index.html" class="btn-primary">Ir de Compras</a>
                    </div>
                </div>
            </div>

            <!-- Sección del Formulario de Reseña (inicialmente oculta) -->
            <div class="review-form-section" id="reviewFormSection" style="display: none;">
                <!-- Botón para volver a seleccionar producto -->
                <div class="back-to-selection">
                    <button type="button" class="back-btn" onclick="showProductSelection()">
                        <i class="fas fa-arrow-left"></i> Volver a Productos
                    </button>
                </div>

                <!-- Información del Producto Seleccionado -->
                <div class="selected-product-info">
                    <div class="product-image-review">
                        <img src="" alt="Producto seleccionado" id="selectedProductImage">
                    </div>
                    <div class="product-details-review">
                        <h1 id="selectedProductName">Nombre del Producto</h1>
                        <p class="product-category" id="selectedProductCategory">Categoría • Colección</p>
                        <p class="product-price" id="selectedProductPrice">$0.00 MXN</p>
                        <p class="purchase-date" id="selectedPurchaseDate">Comprado el: <span id="selectedPurchaseDateValue">Fecha</span></p>
                    </div>
                </div>

                <!-- Campo oculto para el ID del producto -->
                <input type="hidden" id="productId" value="">

                <!-- Formulario de Reseña -->
                <div class="review-form-container">
                    <h2><i class="fas fa-edit"></i> Escribe tu Reseña</h2>
                    <p>Comparte tu experiencia con otros clientes</p>

                    <form id="reviewForm" class="review-form">
                        <!-- Calificación con Estrellas -->
                        <div class="rating-section">
                            <label>Calificación General *</label>
                            <div class="star-rating">
                                <input type="radio" id="star5" name="rating" value="5">
                                <label for="star5" class="star-label"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star4" name="rating" value="4">
                                <label for="star4" class="star-label"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star3" name="rating" value="3">
                                <label for="star3" class="star-label"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star2" name="rating" value="2">
                                <label for="star2" class="star-label"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star1" name="rating" value="1">
                                <label for="star1" class="star-label"><i class="fas fa-star"></i></label>
                            </div>
                            <span class="rating-text-selected">Selecciona una calificación</span>
                        </div>

                        <!-- Título de la Reseña -->
                        <div class="form-group">
                            <label for="reviewTitle">Título de la Reseña *</label>
                            <input type="text" id="reviewTitle" name="reviewTitle" 
                                   placeholder="Ej: 'Excelente calidad, muy cómodo'" required maxlength="60">
                            <span class="char-count">0/60 caracteres</span>
                        </div>

                        <!-- Comentario -->
                        <div class="form-group">
                            <label for="reviewComment">Tu Reseña *</label>
                            <textarea id="reviewComment" name="reviewComment" 
                                      placeholder="¿Qué te gustó del producto? ¿Cómo es la calidad? ¿Recomendarías este producto a otros?" 
                                      rows="6" required maxlength="500"></textarea>
                            <span class="char-count">0/500 caracteres</span>
                        </div>

                        <!-- Calificaciones Específicas -->
                        <div class="specific-ratings">
                            <h3>Calificaciones Específicas (Opcional)</h3>
                            
                            <div class="specific-rating-item">
                                <label>Calidad del Material</label>
                                <div class="specific-stars">
                                    <input type="radio" id="quality5" name="quality" value="5">
                                    <label for="quality5"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="quality4" name="quality" value="4">
                                    <label for="quality4"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="quality3" name="quality" value="3">
                                    <label for="quality3"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="quality2" name="quality" value="2">
                                    <label for="quality2"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="quality1" name="quality" value="1">
                                    <label for="quality1"><i class="fas fa-star"></i></label>
                                </div>
                            </div>

                            <div class="specific-rating-item">
                                <label>Comodidad</label>
                                <div class="specific-stars">
                                    <input type="radio" id="comfort5" name="comfort" value="5">
                                    <label for="comfort5"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="comfort4" name="comfort" value="4">
                                    <label for="comfort4"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="comfort3" name="comfort" value="3">
                                    <label for="comfort3"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="comfort2" name="comfort" value="2">
                                    <label for="comfort2"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="comfort1" name="comfort" value="1">
                                    <label for="comfort1"><i class="fas fa-star"></i></label>
                                </div>
                            </div>

                            <div class="specific-rating-item">
                                <label>Relación Calidad-Precio</label>
                                <div class="specific-stars">
                                    <input type="radio" id="value5" name="value" value="5">
                                    <label for="value5"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="value4" name="value" value="4">
                                    <label for="value4"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="value3" name="value" value="3">
                                    <label for="value3"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="value2" name="value" value="2">
                                    <label for="value2"><i class="fas fa-star"></i></label>
                                    <input type="radio" id="value1" name="value" value="1">
                                    <label for="value1"><i class="fas fa-star"></i></label>
                                </div>
                            </div>
                        </div>

                        <!-- Subir Fotos/Videos -->
                        <div class="media-upload">
                            <h3>Compartir Fotos o Videos (Opcional)</h3>
                            <p>Muestra cómo se ve el producto en la vida real</p>
                            
                            <div class="upload-area" id="uploadArea">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Arrastra tus fotos aquí o haz clic para seleccionar</p>
                                <input type="file" id="mediaUpload" multiple accept="image/*,video/*" class="file-input-hidden">
                            </div>
                            
                            <div class="uploaded-media" id="uploadedMedia">
                                <!-- Las imágenes/videos subidas aparecerán aquí -->
                            </div>
                        </div>

                        <!-- Información del Revisor -->
                        <div class="reviewer-info">
                            <h3>Tu Información</h3>
                            
                            <div class="form-group">
                                <label for="reviewerName">Nombre Público *</label>
                                <input type="text" id="reviewerName" name="reviewerName" 
                                       placeholder="Cómo quieres que aparezca tu nombre" required>
                            </div>

                            <div class="form-group">
                                <label for="reviewerLocation">Ubicación (Opcional)</label>
                                <input type="text" id="reviewerLocation" name="reviewerLocation" 
                                       placeholder="Ciudad, País">
                            </div>

                            <div class="verification-badge">
                                <i class="fas fa-check-circle"></i>
                                <span>Reseña verificada - Compra confirmada</span>
                            </div>
                        </div>

                        <!-- Botones de Envío -->
                        <div class="form-actions">
                            <button type="button" class="cancel-btn" onclick="cancelReview()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="submit" class="submit-review-btn">
                                <i class="fas fa-paper-plane"></i> Publicar Reseña
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>SHADOW & STITCH</h3>
                <p>Tu destino para el estilo urbano auténtico</p>
            </div>
            <div class="footer-section">
                <h4>ENLACES RÁPIDOS</h4>
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="main.html#categorias">Categorías</a></li>
                    <li><a href="main.html#nuevo">Nuevo</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>CONTACTO</h4>
                <p>info@shadowstitch.com</p>
                <p>+52 55 1234 5678</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Shadow & Stitch. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="../js/reseñas.js"></script>
    <script src="../js/scriptMain.js"></script>
</body>
</html>