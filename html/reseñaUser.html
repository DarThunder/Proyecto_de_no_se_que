<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Reseña - Shadow & Stitch</title>
    <link rel="stylesheet" href="../css/styleMain.css">
    <link rel="stylesheet" href="../css/reseñas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <audio autoplay preload loop id="Bg_music" src="../sources/audio/Bg_music.mp3"></audio>
    
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <h1>SHADOW & STITCH</h1>
            </div>

             <!-- AGREGAR ESTO: Información del usuario en el header -->
            <div class="user-header-info" id="user-header-info" style="display: none;">
                <span>Bienvenido, </span>
                <strong id="header-username">Cliente</strong>
            </div>
            
            <div class="hamburger-menu">
                <div class="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div class="mobile-menu">
                <div class="menu-header">
                    <h3>S&S</h3>
                </div>
                <ul class="mobile-nav-links">
                    <li><a href="../index.html"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="../index.html#categorias"><i class="fas fa-th-large"></i> Categorías</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">
                            <i class="fas fa-user"></i> Cuenta
                            <i class="fas fa-chevron-down dropdown-arrow"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="login.html" class="dropdown-link">Iniciar Sesión</a></li>
                            <li><a href="CrearCuenta.html" class="dropdown-link">Crear Cuenta</a></li>
                        </ul>
                    </li>
                    <li><a href="carrito.html"><i class="fas fa-shopping-bag"></i> Carrito</a></li>
                    <li><a href="Listadeseos.html"><i class="fas fa-heart"></i> Lista de Deseos</a></li>
                    <li><a href="seguimiento.html"><i class="fas fa-route"></i> Seguimiento</a></li>
                    <li><a href="orders.html"><i class="fas fa-receipt"></i> Mis Compras</a></li>
                    <li><a href="../index.html#nuevo"><i class="fas fa-star"></i> Nuevo</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">
                            <i class="fas fa-star"></i> Reseñas
                            <i class="fas fa-chevron-down dropdown-arrow"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="misreseñas.html" class="dropdown-link">Mis Reseñas</a></li>
                            <li><a href="reseñaUser.html" class="dropdown-link">Crear Reseña</a></li>
                        </ul>
                    </li>
                </ul>
                <div class="menu-footer">
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

   <main class="reviews-main">
        <div class="reviews-container">
            <div class="reviews-header">
                <h1><i class="fas fa-edit"></i> CREAR RESEÑA</h1>
                <p>Comparte tu experiencia con los productos que has comprado.</p>
            </div>
            
            <div id="review-content">
                <div class="loading-message" id="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando productos...</p>
                </div>

                <div class="login-required" id="login-required-message" style="display: none;">
                    <div class="login-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h2>Debes iniciar sesión</h2>
                    <p>Para crear reseñas de tus productos, por favor inicia sesión.</p>
                    <a href="login.html" class="cta-button">Iniciar Sesión</a>
                </div>

                <div class="empty-state" id="no-products-message" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <h2>No tienes productos para reseñar</h2>
                    <p>Aún no has comprado productos o ya has reseñado todos tus productos.</p>
                    <a href="../index.html" class="cta-button">Explorar Productos</a>
                </div>

                <!-- Paso 1: Seleccionar producto -->
                <div id="product-selection-step" style="display: none;">
                    <h3 style="color: white; margin-bottom: 2rem; text-align: center;">
                        Selecciona un producto para reseñar
                    </h3>
                    <div class="products-grid" id="products-grid">
                        <!-- Los productos se cargarán aquí -->
                    </div>
                </div>

                <!-- Paso 2: Formulario de reseña -->
                <div id="review-form-step" style="display: none;">
                    <div class="review-form-container">
                        <h3 style="color: white; margin-bottom: 2rem; text-align: center;">
                            Crear Reseña para: <span id="selected-product-name"></span>
                        </h3>
                        
                        <form id="review-form">
                            <input type="hidden" id="selected-product-id">
                            
                            <div class="form-group">
                                <label>Calificación:</label>
                                <div class="rating-selector" id="rating-selector">
                                    <i class="fas fa-star rating-star" data-rating="1"></i>
                                    <i class="fas fa-star rating-star" data-rating="2"></i>
                                    <i class="fas fa-star rating-star" data-rating="3"></i>
                                    <i class="fas fa-star rating-star" data-rating="4"></i>
                                    <i class="fas fa-star rating-star" data-rating="5"></i>
                                </div>
                                <input type="hidden" id="rating-value" name="rating" required>
                            </div>

                            <div class="form-group">
                                <label for="size">Talla que compraste:</label>
                                <div class="size-selector" id="size-selector">
                                    <span class="size-option" data-size="XS">XS</span>
                                    <span class="size-option" data-size="S">S</span>
                                    <span class="size-option" data-size="M">M</span>
                                    <span class="size-option" data-size="L">L</span>
                                    <span class="size-option" data-size="XL">XL</span>
                                </div>
                                <input type="hidden" id="size-value" name="size" required>
                            </div>

                            <div class="form-group">
                                <label for="comment">Tu reseña:</label>
                                <textarea 
                                    id="comment" 
                                    name="comment" 
                                    class="form-textarea" 
                                    placeholder="Comparte tu experiencia con este producto..."
                                    maxlength="500"
                                    required
                                ></textarea>
                                <small style="color: #ccc; display: block; text-align: right;">
                                    <span id="char-count">0</span>/500 caracteres
                                </small>
                            </div>

                            <div style="text-align: center;">
                                <button type="button" class="cta-button" onclick="goBackToProducts()" style="margin-right: 1rem;">
                                    <i class="fas fa-arrow-left"></i> Volver
                                </button>
                                <button type="submit" class="cta-button">
                                    <i class="fas fa-paper-plane"></i> Publicar Reseña
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>SHADOW & STITCH</h3>
                <p>Tu destino para el estilo urbano auténtico</p>
            </div>
            <div class="footer-section">
                <h4>ENLACES RÁPIDOS</h4>
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="../index.html#categorias">Categorías</a></li>
                    <li><a href="../index.html#nuevo">Nuevo</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>CONTACTO</h4>
                <p>info@shadowstitch.com</p>
                <p>+52 55 1234 5678</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Shadow & Stitch. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="../js/reseñaUser.js"></script>
    <script src="../js/scriptMain.js"></script>
</body>
</html>